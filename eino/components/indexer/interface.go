package indexer

import (
	"context"

	"github.com/favbox/eino/schema"
)

// Indexer 接口定义了索引器的核心能力。
//
// 用于将文档存储到向量数据库或其他存储系统中，为后续的检索提供基础。
// 索引器通常与嵌入模型配合使用，将文档转换为向量后存储。
type Indexer interface {
	// Store 将文档存储到索引系统中。
	//
	// 该方法接收文档列表，对每个文档进行必要的处理（如生成嵌入向量），
	// 然后存储到向量数据库或其他索引系统中，并返回每个文档的唯一标识符。
	//
	// 参数：
	//   - ctx: 上下文信息，用于取消、超时和传递请求相关数据
	//   - docs: 要存储的文档列表，每个文档包含内容、元数据和唯一标识
	//   - opts: 可选的配置参数，用于定制存储行为（如批量大小、存储策略等）
	// 返回：
	//   - ids: 文档在索引系统中的唯一标识符列表，与输入文档一一对应
	//   - err: 存储过程中的错误（如果有）
	//
	// 使用场景:
	// 	- 构建向量数据库索引
	// 	- RAG 系统的索引构建
	// 	- 文档检索系统的数据准备
	// 	- 知识库的批量导入
	Store(ct context.Context, docs []*schema.Document, opts ...Option) (id []string, err error)
}
